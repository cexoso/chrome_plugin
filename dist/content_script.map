{"version":3,"sources":["util.js","content_script.js"],"names":["injectCustomJs","jsPath","console","log","Promise","resolve","reject","temp","document","createElement","setAttribute","src","chrome","extension","getURL","onload","parentNode","removeChild","head","appendChild","postMessage","type","data","window","to","from","addEventListener","regExp","e","match","m","response","replace","res","fetch","then","text"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;AAEA,SAASoB,WAAT,OAAqC;AAAA,QAAdC,IAAc,QAAdA,IAAc;AAAA,QAARC,IAAQ,QAARA,IAAQ;;AACjCC,WAAOH,WAAP,CAAmB,EAAEC,UAAF,EAAQG,IAAI,UAAZ,EAAwBC,MAAM,KAA9B,EAAqCH,UAArC,EAAnB,EAAgE,GAAhE;AACH;;AAEDC,OAAOG,gBAAP,CAAwB,SAAxB,EAAmC,aAAK;AACpC,QAAMC,SAAS,+BAAf;AADoC,kBAETC,EAAEN,IAFO;AAAA,QAE5BD,IAF4B,WAE5BA,IAF4B;AAAA,QAEtBG,EAFsB,WAEtBA,EAFsB;AAAA,QAElBF,IAFkB,WAElBA,IAFkB;;AAGpC,QAAIE,OAAO,KAAP,IAAgBH,IAAhB,IAAwBA,KAAKQ,KAAL,CAAWF,MAAX,CAA5B,EAAgD;AAC5C,YAAMG,IAAIT,KAAKQ,KAAL,CAAWF,MAAX,CAAV;AACA,gBAAQG,EAAE,CAAF,CAAR;AACI,iBAAK,YAAL;AACIV,4BAAY,EAAEC,MAAM,+BAAR,EAAyCC,MAAM,MAA/C,EAAZ;AACA;AACJ,iBAAK,MAAL;AACI,oBAAMS,WAAW,SAAXA,QAAW;AAAA,2BAAOX,YAAY,EAAEC,yBAAuBS,EAAE,CAAF,EAAKE,OAAL,CAAa,KAAb,EAAoB,KAApB,CAAzB,EAAuDV,MAAMW,GAA7D,EAAZ,CAAP;AAAA,iBAAjB;AACAC,0DAASN,EAAEN,IAAF,CAAOA,IAAhB,GAAsBa,IAAtB,CAA2B;AAAA,2BAAOF,IAAIG,IAAJ,EAAP;AAAA,iBAA3B,EACKD,IADL,CACUJ,QADV,EACoBA,QADpB;AAEA;AARR;AAUH;AACJ,CAhBD;AAiBAX,YAAY,EAAEC,MAAM,4BAAR,EAAsCC,MAAM,MAA5C,EAAZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QDvBgBtB,iBAAAA;AAAT,SAASA,cAAT,CAAwBC,MAAxB,EAAgC;AACnCC,YAAQC,GAAR,CAAYF,MAAZ;AACA,WAAO,IAAIG,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,YAAMC,OAAOC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAF,aAAKG,YAAL,CAAkB,MAAlB,EAA0B,iBAA1B;AACAH,aAAKI,GAAL,GAAWC,OAAOC,SAAP,CAAiBC,MAAjB,CAAwBb,MAAxB,CAAX;AACAM,aAAKQ,MAAL,GAAc,YAAY;AACtB,iBAAKC,UAAL,CAAgBC,WAAhB,CAA4B,IAA5B;AACAZ;AACH,SAHD;AAIAG,iBAASU,IAAT,CAAcC,WAAd,CAA0BZ,IAA1B;AACH,KATM,CAAP;AAUH","file":"content_script.map","sourcesContent":["export function injectCustomJs(jsPath) {\n    console.log(jsPath);\n    return new Promise((resolve, reject) => {\n        const temp = document.createElement('script');\n        temp.setAttribute('type', 'text/javascript');\n        temp.src = chrome.extension.getURL(jsPath);\n        temp.onload = function () {\n            this.parentNode.removeChild(this);\n            resolve()\n        };\n        document.head.appendChild(temp);\n    })\n}","import { injectCustomJs } from './util'\n\nfunction postMessage({ type, data }) {\n    window.postMessage({ type, to: 'frontend', from: 'mid', data }, '*')\n}\n\nwindow.addEventListener('message', e => {\n    const regExp = /^mingyuan\\/(\\w*)\\/([\\w:\\d]*)$/\n    const { type, to, data } = e.data;\n    if (to === 'mid' && type && type.match(regExp)) {\n        const m = type.match(regExp);\n        switch (m[1]) {\n            case 'controller':\n                postMessage({ type: 'mingyuan/controller/alive:yes', data: 'test' })\n                break;\n            case 'data':\n                const response = res => postMessage({ type: `mingyuan/data/${m[2].replace('req', 'res')}`, data: res });\n                fetch(...e.data.data).then(res => res.text())\n                    .then(response, response);\n                break;\n        }\n    }\n});\npostMessage({ type: 'mingyuan/controller/online', data: 'test' });\n"]}